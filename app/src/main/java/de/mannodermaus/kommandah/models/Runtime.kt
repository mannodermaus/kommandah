package de.mannodermaus.kommandah.models

import org.threeten.bp.Duration

sealed class OutputEvent {

  /**
   * An instruction calculated a numerical result
   */
  data class Calc(val instruction: Instruction, val result: Int) : OutputEvent()

  /**
   * An instruction was executed successfully, but without any by-product.
   */
  data class Void(val instruction: Instruction) : OutputEvent()

  /**
   * A log message was generated by the given instruction
   */
  data class Log(val instruction: Instruction, val message: String) : OutputEvent()

  /**
   * An error occurred at the given instruction,
   * and execution was halted because of it.
   */
  data class Error(val instruction: Instruction, val cause: Throwable) : OutputEvent()

  object Completed : OutputEvent()
}

/**
 * Representation of a Program's "return status",
 * i.e. if execution was successful or not.
 */
sealed class ExitCode {
  /**
   * Not returned yet (either "not started" or "still running")
   */
  object None : ExitCode()

  /**
   * Successful execution
   */
  object Success : ExitCode()

  /**
   * Failed with error
   */
  data class Error(val cause: Throwable) : ExitCode()
}

data class ExecutionEnvironment(
    val speed: Duration = Duration.ofMillis(100)
)
